{
  "hash": "794e7408be36420c334cf4f2ddb9e38a",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Competing Risks\"\nformat:\n  html:\n    toc: true\n    toc-expansion: true\n    fig-height: 3\n---\n\n\n::: {.cell}\n\n:::\n\n\nWe have generally assumed **ignorable censoring**: at any time point $t$, the probability of becoming censored is the same for all units who are alive at that time point, regardless of their future time until death.\n\nAnother way to think about ignorable censoring is to let $C$ be the time until censoring and $T$ be the time until the event of interest. Then we assume $C$ is independent of $T$. A unit is censored if it happens that $C < T$, and a unit has the event if $T \\leq C$.\n\n**Competing risks** are a common setting that violates the assumption of ignorable censoring. We will consider competing risks through a concrete example.\n\n### Illustration: Retirement and death\n\nThis example comes from an example that German Rodriguez developed about the retirments and deaths of Supreme Court justices. Here is the [original source](https://grodri.github.io/survival/justices). He used Wikipedia and the Supreme Court website to create a dataset on the time that Supreme Court justices were in office, and how their time ended (retirement, resignation, death, still an incumbent). The code at the button below takes his data and simplifies them for our analysis.\n\n\n::: {.cell waring='false'}\n\n```{.r .cell-code  code-fold=\"true\"}\nretirement <- read_csv(\"https://grodri.github.io/datasets/justices.csv\") |>\n  mutate(\n    start = parse_date(startstr, format = \"%B %d, %Y\"),\n    stop = parse_date(stopstr, format = \"%B %d, %Y\"),\n    # Make t time on the bench in days\n    t = difftime(stop, start, units = \"days\"),\n    # Convert to years\n    t = as.numeric(t) / 365.25,\n    age_appointed = as.numeric(difftime(\n      stop,\n      parse_date(birthstr, format = \"%B %d, %Y\"),\n      units = \"days\"\n    )) / 365.25\n  ) |>\n  # Keep only those who died or resigned\n  filter(status != \"Incumbent\") |>\n  select(number, name, state, age_appointed, status, t) |>\n  write_csv(\"assets/retirement.csv\")\n```\n:::\n\n\nYou can load the simplified data [retirement.csv](assets/retirement.csv) directly with the line below.\n\n::: {.cell}\n\n```{.r .cell-code}\nretirement <- read_csv(\"https://ilundberg.github.io/eventhistory/assets/retirement.csv\")\n```\n:::\n\n\nInitially, the justices are all active. Over time since appointment, they gradually move into one of two final states: either death (`status = \"Died\"`) or retirement (`status = \"Resigned\"` or `status = \"Retired\"`).\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](competing_risks_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\nDeath and retirement happen at remarkably similar rates over time!\n\n### A Kaplan-Meier estimate of survival\n\nSuppose death is the event of interest. The data only contain death dates for those who died in office; otherwise we only know that the justice was alive until they retired. We might estimate survival as a function of time since appointment by Kaplan-Meier, where censoring is retirment and the event is death.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nkm <- survfit(\n  Surv(t, event = status == \"Died\") ~ 1, \n  data = retirement\n)\n```\n:::\n\n\nThe figure below visualizes the resulting survival curve.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nkm |>\n  broom::tidy() |>\n  ggplot(aes(x = time, y = estimate)) +\n  geom_hline(yintercept = c(0,1), linetype = \"dashed\") +\n  geom_line() +\n  labs(\n    y = \"Survival Curve\\n(Event = Death)\",\n    x = \"Time Since Appointment to Supreme Court\"\n  )\n```\n\n::: {.cell-output-display}\n![](competing_risks_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\nNotice the right end of this curve. The Kaplan-Meier estimates show that justices have a 12.5\\% chance of living for 35 years after appointment! Given that the median age at appointment is 71, this means that the median justice has a 12.5\\% chance of surviving past the age of 106. Surely this is misleading!\n\n### What has gone wrong\n\nThe problem here is that censoring (retirement) is not independent of the event of interest (death). Supreme Court justices often serve on the bench until their health is poor. If we imagine a justice who has served 20 years on the bench and then retires, that justice's hazard of death is likely higher than the hazard for another justice who has served 20 years on the bench and continues to serve. But Kaplan-Meier (and all survival models) has assumed that censoring is independent of the hazard of death.\n\n### What to do\n\nNon-ignorable censoring is a deep problem, and easy answers are elusive. There exist multivariate survival models that assume a correlation between the latent risks of multiple distinct hazards. But these models come with their own assumptions and can be difficult to explain to a reader.\n\nIn the presence of competing risks, one simple solution is to visualize all the competing risks, as in the figure at the top of this page. This may be a good practice in applied research.\n\n",
    "supporting": [
      "competing_risks_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}