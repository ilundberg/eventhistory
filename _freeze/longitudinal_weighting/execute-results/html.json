{
  "hash": "0f4cf6414166258a70a67d60e998cb8a",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Longitudinal Weighting\"\nformat:\n  html:\n    toc: true\n    toc-expansion: true\n---\n\n\n::: {.cell}\n\n:::\n\n\nThis page does not have a written resource as much as the others, because we will talk through these issues together in class with an exercise and with slides.\n\n* [slides](slides/intermediate_confounding.pdf) on how longitudinal treatments are difficult to study due to intermediate confounding\n* [slides](slides/longitudinal_weighting.pdf) on how to estimate effects of longitudinal treatments by longitudinal inverse probability weighting and marginal structural models\n\nIn the beginning of the longitudinal weighting section, we will do this class exercise together.\n\n## Class exercise\n\n> Here is a [PDF version](slides/ipw_dynamic_exercise.pdf) of this exercise.\n\nYou teach a class of $n = 16$ elementary students. At each time point $t$, the student can either be below grade level ($L_t = 1$) or not below grade level ($L_t = 0$). You can assign extra support $A_t = 1$ (e.g., reading practice with a parent volunteer) to some but not all of the students; the untreated students have $A_t = 0$.\n\nWe will study this process over two time periods: $t = 0$ and $t = 1$. The outcome would be something defined after these periods, but for our purposes there will be no outcome. We will focus on how you would weight, which would apply to any outcome you might care about.\n\nHere is how the causal process unfolds:\n\n* At time 0, you see that 50\\% of the class is below grade level: $P(L_0 = 1) = 0.5$\n* At every time period $t$, treatment is assigned so that\n  * those below grade level $L_{t} = 1$ receive extra support $A_{t+1} = 1$ with probability 1\n  * those not below grade level $L_{t} = 0$ receive extra support $A_{t+1} = 1$ with probability 0.5\n* At every time period $t$, treatment affects the next confounder\n  * if you receive support $A_t = 1$, then you will not fall behind $P(L_{t+1} = 1) = 0$\n  * if you do not receive support $A_t = 0$, then you have a 50\\% chance of falling behind: $P(L_{t+1} = 1) = 0.5$\n  \n## Draw a DAG\n\nThe first task of the exercise is to draw a DAG for this causal process.\n\n## Determine weights\n\nThe table below shows data from this causal process. Your task is to fill in the weight columns with a pencil.\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n| ID| L0| A0| L1| A1|w0 |w1 |w  |\n|--:|--:|--:|--:|--:|:--|:--|:--|\n|  1|  1|  1|  0|  1|   |   |   |\n|  2|  1|  1|  0|  0|   |   |   |\n|  3|  1|  1|  0|  1|   |   |   |\n|  4|  1|  1|  0|  0|   |   |   |\n|  5|  1|  1|  0|  1|   |   |   |\n|  6|  1|  1|  0|  0|   |   |   |\n|  7|  1|  1|  0|  1|   |   |   |\n|  8|  1|  1|  0|  0|   |   |   |\n|  9|  0|  1|  0|  1|   |   |   |\n| 10|  0|  1|  0|  0|   |   |   |\n| 11|  0|  1|  0|  1|   |   |   |\n| 12|  0|  1|  0|  0|   |   |   |\n| 13|  0|  0|  1|  1|   |   |   |\n| 14|  0|  0|  0|  1|   |   |   |\n| 15|  0|  0|  1|  1|   |   |   |\n| 16|  0|  0|  0|  0|   |   |   |\n\n\n:::\n:::\n\n\n### Weights for $E(Y\\mid do(A_0 = 1))$\n\nSuppose we want to estimate the expected outcome under an intervention to set $A_0 = 1$. We plan to reweight the 12 units observed with $A_0 = 1$. What weight should we put on each of these 6 units?\n\nNote that $L_0$ is a sufficient conditioning set.\n\n### Weights for $E(Y\\mid do(A_1 = 1))$\n\nSuppose we want to estimate the expected outcome under an intervention to set $A_1 = 1$. We plan to reweight the 9 units observed with $A_1 = 1$. What weight should we put on each of these 6 units?\n\nNote that $L_1$ is a sufficient conditioning set.\n\n### Weights for $E(Y\\mid do(A_0 = 1, A_1 = 1))$\n\nSuppose we want to estimate the expected outcome under an intervention to set $A_0 = 1$ and $A_1 = 1$. We plan to reweight the 6 units observed in this condition. What weight should we put on each of these 6 units?\n\n### Intuition check\n\nUsing your weight from 1.3,\n\n* take a weighted average of $L_0$. Does your result match the factual distribution of $L_0$?\n* take a weighted average of $L_1$. Does your result match the factual distribution of $L_1$?\n\nThink about why you would get the answers above.\n\n\n\n",
    "supporting": [
      "longitudinal_weighting_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}