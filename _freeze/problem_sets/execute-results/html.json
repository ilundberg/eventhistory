{
  "hash": "993237b67c8a26dd269ccbb601b13425",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Problem Sets\"\nformat: html\n---\n\n\n::: {.cell}\n\n:::\n\n\nProblem sets are currently posted on Piazza, but I plan to gather them on this page.\n\n## Problem Set 1: Key Concepts\n\nA study enrolls 6 people looking for work. 3 are randomly assigned to a job training intervention and 3 are randomly assigned to no job training. Over a 52-week follow-up period beginning January 1, the study records the time until they are hired in weeks.\n\n\n| ID | Age | Treatment | Time until hired |\n| --- | --- | --- | --- |\n1 | 53 | Treated | 12 weeks |\n2 | 26 | Treated | 10 weeks  |\n3 | 37 | Treated | 44 weeks |\n4 | 25 | Untreated | 7 weeks |\n5 | 48 | Untreated | Never hired in 52 weeks |\n6 | 34 | Untreated | 40 weeks |\n\n1. What is time 0 in this study?\n2. Which unit(s) were censored?\n3. Can you point identify the mean time until hired in the treatment condition? If not, can you provide a lower bound? Ignore statistical uncertainty.\n4. Can you point identify the mean time until hired in the untreated condition? If not, can you provide a lower bound? Ignore statistical uncertainty.\n5. Does the job training reduce the average time until hired?\n\nThe next questions are about the Exponential distribution, which assumes a constant hazard: $h(t) = \\lambda$.\n\n6. True or False. The CDF $F(t) = P(T < t)$ is an increasing function of $t$.\n7. True or False. The survival function $S(t) = P(T > t)$ is an increasing function of $t$.\n8. A demographer studies a cohort of people born in 1965 where age is the time variable (with time zero at age zero). They study the time until first marriage. In 1--3 sentences, make an argument that the assumption of a constant hazard is implausible.\n\n## Problem Set 2: Exponential\n\nSee the [exercise](exponential.qmd#exercise) at the end of the Exponential page.\n\n## Problem Set 3: Weibull\n\nThis problem set practices Kaplan-Meier survival curve estimation and a Weibull model.\n\nThe `survival::veteran` data contain data from a clinical trial involving cancer patients run by the Veteran's Administration. These data are described in Kalbfleisch and Prentice (1980) on p.~60. There are 137 patients, and only 9 are censored before death. \n\n- `status` is 1 for death, 0 for censoring\n- `time` is days of survival\n- `trt` is a randomized chemotherapy test treatment. 1 indicates standard treatment, 2 indicates the test treatment\n\nFor more information on the data see `?survival::veteran`.\n\n1. (10 points) Estimate survival curves by treatment status `trt`, using the Kaplan-Meier method. Visualize the results in a plot.\n2. (10 points) Estimate survival curves by treatment status `trt`, using a Weibull regression with only this predictor. Visualize the results in a plot.\n3. (10 points) Compare: Plot the Weibull and Kaplan-Meier survival curves on the same plot. How do they differ? For ease of comparison, you might use different panels or different plots for each treatment status so that it is easier to compare across models within treatment status.\n4. (10 points) Plot the estimated Weibull hazard function. Does it increase or decrease with time?\n5. (8 points) In your Weibull results, can you reject the null of an Exponential model?\n6. (2 points, Challenge): Construct a confidence interval on each point of your Weibull survival functions and visualize the result. Note that this is quite challenging; it is only worth 2 points so that you can skip it and still get an A on the problem set. Here are some steps.\n     - Define the X matrix at which to make predictions\n     - Loop over simulations. In each iteration,\n          - Simulate $\\vec\\beta$ and the `log_scale` parameter from a Multivariate Normal centered at `c(coef(model), log(model$scale))` with variance-covariance matrix `vcov(model)`\n          - Calculate the simulated value of the `rweibull` parameter `scale`, which is $e^{\\vec{X}'\\vec\\beta}$ where $\\vec\\beta$ are coefficients from `survreg`\n          - Calculate the simulated value of the `rweibull` parameter `shape`, which is `1 / exp(log_scale)` where `log_scale` is the simulated value of the log of what `survreg` calls the scale parameter\n          - Simulate survival functions with those parameters\n     - At each point of the survival curve, calculate the 2.5 and 97.5 percentiles of the empirical distribution of simulated draws.\n\n## Problem Set 4: Recap of Survival Analysis\n\nThis problem set asks you to carry out a survival analysis of your choosing using concepts we have learned in the course. Choose one of the NLSY datasets on the [data](data.qmd) page, which include\n\n* [assets/nlsy_outcomes.csv](nlsy_outcomes.csv) which contains time to high school completion, college completion, marriage, and parenthood with a few basic covariates\n     * In this dataset, you would likely choose 1 of the 4 outcomes\n* [assets/employment_duration.csv](employment_duration.csv) which contains the duration of spells of employment, with many covariates defined at the start of the spell\n* [assets/first_marriage_duration.csv](first_marriage_duration.csv) which contains the duration of first marriages, with many covariates defined at the start of the spell\n\nBelow are the questions for the problem set.\n\n1. Define time 0, time to event, and censoring for your question.\n2. Visualize survival with Kaplan-Meier. Interpret something about the estimated curve.\n3. Using one or more covariates and a model with a parametric hazard, compare survival curves across subgroups.\n     * Explain why you made your particular modeling choices.\n4. In words, give an example of non-ignorable censoring that could exist in your setting.\n5. In words, give an example of unmeasured heterogeneity that could exist in your setting. How might this affect the estimated hazard function?\n\n<!-- A researcher analyzes a setting where many subjects have cause-specific hazards (e.g., die from cancer or from heart disease). If $J = j$ is a particula cause of death, one can define a cause-specific hazard function -->\n\n<!-- $$h_j(t) = \\frac{f(T = t, J = j)}{S(t)}$$ -->\n<!-- where the numerator is the probability density of death at $T = t$ from hazard $J = j$ and the denominator is the probability of survival to time $t$ without dying from any cause. -->\n\n<!-- A researcher might estimate $h_j(t)$ by treating death by $J = j$ as the event and death by any other cause as censoring. -->\n\n<!-- 1. Consider two settings. In which setting is ignorable censoring more credible, and why? -->\n<!--      a. The event is death, the cause of interest is death by COVID-19, and the other causes are other diseases. -->\n<!--      b. The event is  -->\n\n<!-- Would be nice to have a credible competing risks setting for the problem set, then ask them to apply in a less credible setting. -->\n\n<!-- Would be nice to have a setting with one large group and then subgroups (for Cox model). -->\n\n\n",
    "supporting": [
      "problem_sets_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}